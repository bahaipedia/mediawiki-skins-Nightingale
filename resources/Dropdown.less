@import 'mediawiki.skin.variables.less';

/* Dropdown.less */

/* 1. Base Dropdown Container Logic */
/* This targets ONLY portlets that are siblings of your special dropdown trigger */
.mw-portlet-dropdown ~ .mw-portlet {
    position: relative;

    .mw-portlet-body {
        display: none;
        position: absolute;
        right: 0;
        top: 100%;
        z-index: 10;
        margin-top: 6px;
        
        background: var(--background-color-card, #ffffff);
        box-shadow: 0 5px 17px 0 var(--shadow-color-dropdown, rgba(0,0,0,0.1)), 0 0 1px var(--color-gray, #ccc);
        border-radius: 4px;
        
        width: max-content;
        min-width: 160px;
        max-width: 90vw;
        padding: 10px;
    }

    /* Show menu on check */
    input:checked ~ .mw-portlet-body {
        display: block; 
        opacity: 1;
        visibility: visible;
        animation: fade-in 0.2s ease-out; 
    }

    /* --- GLOBAL LIST RESET (Scoped to these dropdowns) --- */
    .mw-portlet-body ul {
        list-style: none !important;
        margin: 0 !important;
        padding: 0 !important;
    }

    /* --- GLOBAL LINK STYLING (Scoped to these dropdowns) --- */
    /* This applies the nice styling to User Menu AND Mega Menu links */
    /* But IGNORES the Notification icons because they don't have the .mw-portlet-dropdown sibling */
    .mw-portlet-body a {
        display: flex; 
        align-items: center;
        gap: 8px;
        padding: 8px 12px;
        text-decoration: none;
        color: var(--color-text-main, #333);
        border-radius: 4px;
        transition: background 0.1s ease;
        white-space: nowrap;
        font-weight: normal; 
        overflow: hidden;
    }

    .mw-portlet-body a:hover {
        background-color: var(--background-color-hover, #f5f5f5);
        text-decoration: none;
    }

    /* Reset Item Margins */
    .mw-portlet-body .mw-list-item {
        margin: 0;
        padding: 0;
        width: 100%;
    }
}

/* 2. Mega Menu Specific Layout */
.nightingale-mega-menu {
    display: flex;
    flex-direction: row-reverse; 
    align-items: stretch; 
    gap: 20px;
}

/* 3. Mega Menu Columns */
.nightingale-menu-section {
    display: flex;
    flex-direction: column;
    gap: 5px; 
    flex: 1;
    min-width: 120px;
}

/* Separator Line for Mega Menu */
.nightingale-section-primary {
    border-left: 1px solid var(--border-color-subtle, #eee);
    padding-left: 20px !important;
}

/* 4. Mobile / Responsive Adjustments */
@media (max-width: 600px) {
    .nightingale-mega-menu {
        flex-direction: column; 
    }
    
    .nightingale-section-primary {
        border-right: none;
        border-bottom: 1px solid var(--border-color-subtle, #eee);
        padding-right: 0 !important;
        padding-left: 0 !important;
        padding-bottom: 15px !important;
        margin-bottom: 15px !important;
        border-left: none;
    }
}
